{% extends 'main.html' %} {% load static %} 




{% block content %}

<header>
  <div class="pt-32 pb-16 md:pt-40 overflow-hidden">
    <div class="container m-auto px-6 md:px-12 lg:px-6">
      <div class="bg-gray-700 rounded-t-lg h-36 w-full mb-4"></div>
      <div class="flex flex-col items-center bg-black -mt-32">
        <a href="#" class="block">
          <img
            alt="profil"
            src="{% static 'img/profile_pic.png' %}"
            class="bg-white shadow-md object-cover rounded-full sm:h-20 sm:w-20 md:h-44 md:w-44 border-2 border-white"
          />
        </a>
        <div class="flex flex-col text-center">
          <p class="text-gray-800 text-4xl text-center font-medium mt-2">
            {{user_data.fname | capfirst}} {{user_data.lname | capfirst}}
          </p>
          <p class="text-gray-400 font-bold text-xs mt-2 mb-4">
            @{{request.user}}
          </p>
          <div class="flex flex-row justify-center">
            <p class="text-xs p-2 bg-gray-300 text-white px-4 rounded-full">
              Web Developer
            </p>
            <div
              class="flex items-center justify-between text-sm text-gray-600"
            ></div>
          </div>
          <div class="flex flex-row justify-center mt-2">
            <p class="text-xs p-2 bg-gray-500 text-white px-4 rounded-full">
              Edit Resume
            </p>
            <div
              class="flex items-center justify-between text-sm text-gray-600"
            ></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

<section class="container m-auto mt-8 px-6 md:px-12 lg:px-6">
    <div class="md:flex md:flex-row text-gray-600">
      <div class="md:w-3/4 lg:w-3/4">
        <div class="text-gray-600 body-font overflow-hidden">
          <div class="container px-8" bis_skin_checked="1">
            <div class="divide-y-2 divide-gray-100" bis_skin_checked="1" method="POST">
              <div class="py-8 flex flex-col md:flex-nowrap">
              <div class="text-gray-600 body-font">
                <div class="container py-8 mx-auto flex flex-col" id="wrapper">
                  <div class="flex items-center space-x-4">
                    <svg
                      class="h-7 w-7 text-blue-300"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"
                      />
                    </svg>
                    <h2
                      class="inline-flex text-2xl font-medium text-gray-900 title-font mb-1"
                    >
                      Create Resume
                    </h2>
                    <h4 class="inline-flex text-xl font-medium text-green-700 title-font mb-1">{{message}}</h4>
                  </div>
                <form method="POST" class="mt-8">
                    {% csrf_token %}
                    <div class="grid gap-6 mb-6 lg:grid-cols-2">
                      {% for field in resume_form %}
                        <div>
                            <label for="first_name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">{{field.label}}</label>
                            {{field}}
                          </div>
                      {% endfor %}
                    </div>
                </form>
                <form method="POST">
                    {% if experiencesForm %}
                        {{experiencesForm.management_form}}
                        <div id="experience-form-list">
                            {% for form in experiencesForm %}
                                {% csrf_token %}
                                    <div class='experience-form'>
                                        {{form}}
                                    </div>
                                {% endfor %}
                        </div>
                            <button id="add-more" type="button">Add Experience</button>
                            <div class="hidden" id="empty-form">    {{experiencesForm.empty_form}}   </div>
                    {% endif %}
                    <button type="submit" class="w-full text-white font-semibold py-3 px-6 rounded-md text-center transition bg-cyan-500 hover:bg-cyan-600 active:bg-cyan-700 focus:bg-sky-600 sm:w-max">Update Profile</button>
                </form>                
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</section>


{% endblock content %}

{% block custom_js %}
<script>
    document.addEventListener('click', (event)=>{
        if (event.target.id == 'add-more') {
            add_new_form(event)
        }
    })

    function add_new_form(event) {
        if (event) {
            event.preventDefault()
        }
        const totalNewForms = document.getElementById('id_form-TOTAL_FORMS')
        const currentExperienceForms = document.getElementsByClassName('experience-form')
        const currentFormCount = currentExperienceForms.length // + 1
        const formCopyTarget = document.getElementById('experience-form-list')
        const copyEmptyFormEl = document.getElementById('empty-form').cloneNode(true)
        copyEmptyFormEl.setAttribute('class', 'experience-form')
        copyEmptyFormEl.setAttribute('id', `form-${currentFormCount}`)
        const regex = new RegExp('__prefix__', 'g')
        copyEmptyFormEl.innerHTML = copyEmptyFormEl.innerHTML.replace(regex, currentFormCount)
        totalNewForms.setAttribute('value', currentFormCount + 1)
        // now add new empty form element to our html form
        formCopyTarget.append(copyEmptyFormEl)
        debugger;
    }
</script>

{% endblock custom_js %}